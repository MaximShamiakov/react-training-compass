{"ast":null,"code":"import React from'react';import{useState,useEffect}from'react';import{useSelector,useDispatch}from\"react-redux\";import axios from'axios';import{actionIndexTask}from'../../redux/actions/actionIndexTask';import{actionsQuestionsTasks}from'../../redux/actions/actionsQuestionsTasks';import{API_URL}from'../../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Task(){var _tasks$currentQuestio;const dispatch=useDispatch();const tasks=useSelector(state=>state.questionsTasksReducer.items);const[currentQuestionIndex,setCurrentQuestionIndex]=useState(0);const handleNextQuestion=()=>{setCurrentQuestionIndex(prevIndex=>prevIndex+1);};const handleShowAnswer=()=>{const currentQuestion=tasks[currentQuestionIndex];alert(currentQuestion.answer);};const itemsCategories=useSelector(state=>state.selectedCategory.items);const indexTask=useSelector(state=>state.indexTask.items);const lengthObj=useSelector(state=>state.questionsTasksReducer.items);useEffect(()=>{if(currentQuestionIndex===tasks.length&1<=tasks.length){axios.post(\"\".concat(API_URL,\"/categories/\"),{category:itemsCategories,indexTask:indexTask}).then(response=>{console.log(response);setCurrentQuestionIndex(0);const taskIds=response.data.map(task=>task.id);dispatch(actionsQuestionsTasks(response.data));dispatch(actionIndexTask(taskIds));}).catch(error=>{console.log(error);});}else if(tasks.length===0){alert('Вы прошли мои задания');}},[currentQuestionIndex]);return/*#__PURE__*/_jsx(\"div\",{className:\"block-program\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block-category\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"block-question\",children:[lengthObj.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"question-name\",children:(_tasks$currentQuestio=tasks[currentQuestionIndex])===null||_tasks$currentQuestio===void 0?void 0:_tasks$currentQuestio.question}):/*#__PURE__*/_jsx(\"div\",{className:\"question-name\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"response-name\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"answer-button\",onClick:handleShowAnswer,children:\"\\u0412\\u041E\\u041F\\u0420\\u041E\\u0421\"}),/*#__PURE__*/_jsx(\"div\",{className:\"answer-button\",onClick:handleNextQuestion,children:\"NEXT\"})]})]})})});}","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","axios","actionIndexTask","actionsQuestionsTasks","API_URL","jsx","_jsx","jsxs","_jsxs","Task","_tasks$currentQuestio","dispatch","tasks","state","questionsTasksReducer","items","currentQuestionIndex","setCurrentQuestionIndex","handleNextQuestion","prevIndex","handleShowAnswer","currentQuestion","alert","answer","itemsCategories","selectedCategory","indexTask","lengthObj","length","post","concat","category","then","response","console","log","taskIds","data","map","task","id","catch","error","className","children","question","onClick"],"sources":["/home/max/it/Training compass/training-compass/src/Components/Task/Task.jsx"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react';\nimport { useSelector, useDispatch} from \"react-redux\";\nimport axios from 'axios';\nimport { actionIndexTask } from '../../redux/actions/actionIndexTask';\nimport { actionsQuestionsTasks } from '../../redux/actions/actionsQuestionsTasks';\nimport { API_URL } from '../../config';\n\n\n\nexport default function Task() {\n\n    const dispatch = useDispatch()\n    const tasks = useSelector(state => state.questionsTasksReducer.items)\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n    const handleNextQuestion = () => {\n        setCurrentQuestionIndex(prevIndex => prevIndex + 1);\n      };\n    const handleShowAnswer = () => {\n        const currentQuestion = tasks[currentQuestionIndex];\n        alert(currentQuestion.answer);\n      };\n    const itemsCategories = useSelector(state => state.selectedCategory.items)\n    const indexTask = useSelector(state => state.indexTask.items)\n    const lengthObj = useSelector(state => state.questionsTasksReducer.items)\n   \n\n\n    useEffect(() => {\n        if (currentQuestionIndex === tasks.length & 1 <= tasks.length) {\n          axios.post(`${API_URL}/categories/`, {category:itemsCategories, indexTask:indexTask})\n            .then((response) => {\n              console.log(response)\n              setCurrentQuestionIndex(0);\n              const taskIds = response.data.map((task) => task.id);\n              dispatch(actionsQuestionsTasks(response.data))\n              dispatch(actionIndexTask(taskIds));\n            })\n            .catch(error => {\n              console.log(error);\n            });\n        }\n        else if (tasks.length === 0){\n          alert('Вы прошли мои задания')\n        }\n        \n      },\n      [currentQuestionIndex], \n      );\n\n\n  return (\n    <div className=\"block-program\">\n      <div className=\"block-category\">\n        <div className=\"block-question\">\n        {lengthObj.length > 0 ? (<div className=\"question-name\">{tasks[currentQuestionIndex]?.question}</div>): (<div className=\"question-name\">Выберите категорию!</div>)}\n         <div className=\"response-name\">\n           <div className=\"answer-button\" onClick={handleShowAnswer}>ВОПРОС</div>\n           <div className=\"answer-button\" onClick={handleNextQuestion}>NEXT</div>\n         </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,WAAW,KAAO,aAAa,CACrD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,eAAe,KAAQ,qCAAqC,CACrE,OAASC,qBAAqB,KAAQ,2CAA2C,CACjF,OAASC,OAAO,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAIvC,cAAe,SAAS,CAAAC,IAAIA,CAAA,CAAG,KAAAC,qBAAA,CAE3B,KAAM,CAAAC,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAY,KAAK,CAAGb,WAAW,CAACc,KAAK,EAAIA,KAAK,CAACC,qBAAqB,CAACC,KAAK,CAAC,CACrE,KAAM,CAACC,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CACnE,KAAM,CAAAqB,kBAAkB,CAAGA,CAAA,GAAM,CAC7BD,uBAAuB,CAACE,SAAS,EAAIA,SAAS,CAAG,CAAC,CAAC,CACrD,CAAC,CACH,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,eAAe,CAAGT,KAAK,CAACI,oBAAoB,CAAC,CACnDM,KAAK,CAACD,eAAe,CAACE,MAAM,CAAC,CAC/B,CAAC,CACH,KAAM,CAAAC,eAAe,CAAGzB,WAAW,CAACc,KAAK,EAAIA,KAAK,CAACY,gBAAgB,CAACV,KAAK,CAAC,CAC1E,KAAM,CAAAW,SAAS,CAAG3B,WAAW,CAACc,KAAK,EAAIA,KAAK,CAACa,SAAS,CAACX,KAAK,CAAC,CAC7D,KAAM,CAAAY,SAAS,CAAG5B,WAAW,CAACc,KAAK,EAAIA,KAAK,CAACC,qBAAqB,CAACC,KAAK,CAAC,CAIzEjB,SAAS,CAAC,IAAM,CACZ,GAAIkB,oBAAoB,GAAKJ,KAAK,CAACgB,MAAM,CAAG,CAAC,EAAIhB,KAAK,CAACgB,MAAM,CAAE,CAC7D3B,KAAK,CAAC4B,IAAI,IAAAC,MAAA,CAAI1B,OAAO,iBAAgB,CAAC2B,QAAQ,CAACP,eAAe,CAAEE,SAAS,CAACA,SAAS,CAAC,CAAC,CAClFM,IAAI,CAAEC,QAAQ,EAAK,CAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrBhB,uBAAuB,CAAC,CAAC,CAAC,CAC1B,KAAM,CAAAmB,OAAO,CAAGH,QAAQ,CAACI,IAAI,CAACC,GAAG,CAAEC,IAAI,EAAKA,IAAI,CAACC,EAAE,CAAC,CACpD7B,QAAQ,CAACR,qBAAqB,CAAC8B,QAAQ,CAACI,IAAI,CAAC,CAAC,CAC9C1B,QAAQ,CAACT,eAAe,CAACkC,OAAO,CAAC,CAAC,CACpC,CAAC,CAAC,CACDK,KAAK,CAACC,KAAK,EAAI,CACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC,CACpB,CAAC,CAAC,CACN,CAAC,IACI,IAAI9B,KAAK,CAACgB,MAAM,GAAK,CAAC,CAAC,CAC1BN,KAAK,CAAC,uBAAuB,CAAC,CAChC,CAEF,CAAC,CACD,CAACN,oBAAoB,CACrB,CAAC,CAGL,mBACEV,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BtC,IAAA,QAAKqC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BpC,KAAA,QAAKmC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC9BjB,SAAS,CAACC,MAAM,CAAG,CAAC,cAAItB,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAAlC,qBAAA,CAAEE,KAAK,CAACI,oBAAoB,CAAC,UAAAN,qBAAA,iBAA3BA,qBAAA,CAA6BmC,QAAQ,CAAM,CAAC,cAAIvC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0GAAmB,CAAK,CAAE,cACjKpC,KAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAACG,OAAO,CAAE1B,gBAAiB,CAAAwB,QAAA,CAAC,sCAAM,CAAK,CAAC,cACtEtC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAACG,OAAO,CAAE5B,kBAAmB,CAAA0B,QAAA,CAAC,MAAI,CAAK,CAAC,EACnE,CAAC,EACF,CAAC,CACH,CAAC,CACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}